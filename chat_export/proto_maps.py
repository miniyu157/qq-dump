PROTO_FIELD_MAP = {
    "40800": "MSG_CONTAINER",  # 如果消息容器是个 protobuf array, 那么它通常是包含了消息本身和附带的引用块, 或者图片文本等消息拼接
    "40050": "timespan",
    "47423": "ReplyOrigin",  # 原消息对象, 如果是个 array, 则可能是原消息在这里被 QQ 拆分成了几段
    "47404": "reply_origin_timespan",  # 依据此时间戳查找引用的目标
    "47413": "reply_origin_summary",  # 原消息的文本摘要
    "45002": "MSG_TYPE",  # 消息类型
    "45003": "MSG_SUB_TYPE",  # 子类型, 可能用于区分互动表情
    "45101": "text",  # 消息文本
    "47901": "ark_json",  # Ark 卡片的 json 数据
    "45923": "voice_to_text",  # 语音转文字结果, 可能为空
    "80900": "market_face_text",  # 商城表情的描述文本, 例如 "[贴贴]"
    "45402": "file_name",
    "45411": "image_width",
    "45412": "image_height",
    "45410": "video_duration",
    "45413": "video_width",
    "45414": "video_height",
    "48157": "call_summary",  # 通话消息的文本摘要
    "45829": "image_is_flash",  # 图片是否为闪照的标志字段 (1:是闪照)
    "48403": "RedBagOBJ",  # 红包详情对象
    "48412": "REDBAG_TYPE",  # 红包类型字段 (2:普通, 6:口令, 15:语音红包)
    "48443": "redbag_text",  # 红包标题, 如 "恭喜发财"
    # 戳一戳/ 关系标识 subtype 17
    "48214": "system_gray_tip_xml",  # 互动类系统提示的 xml 内容, 包含火花提示, 好友验证, 戳头像等
    "48271": "mutual_mark_json",  # 火花提示的 json
    "48274": "gray_tip_content",  # 火花提示的纯文本摘要
    # 空间动态/礼物提醒 subtype 26
    "48175": "FeedSourceStruct",  # 包含 text: "发布了动态" 或 "更新了个签" 等
    "48176": "FeedContentStruct",  # 动态内容的文本摘要
    "48182": "feed_target_uin",  # 动态所属的用户的 QQ
    "48178": "feed_text",  # FeedSourceStruct 或者 FeedContentStruct 的子字段
    # 图片/文件核心字段
    "45424": "image_md5_hex",  # 32位 MD5 字符串，用于计算本地路径
    "45418": "is_original",  # 0:普通图, 1:原图
    "45405": "file_size",  # 文件大小
    "45802": "url_198",  # 缩略图下载链接
    "45803": "url_720",  # 预览图下载链接
    "45804": "url_original",  # 原图下载链接
    "47703": "recaller_uid",  # 撤回者的 UID
    "47713": "recall_suffix",  # 撤回消息的后缀文本 (例如 "你猜猜撤回了什么。")
    # QQ 表情
    "47602": "qqface_emoji_text",  # QQ emoji 的文本描述, 例如 "/捂脸"
    "47611": "qqface_reaction_id",  # QQ 互动表情的 ID
    "52138": "qqface_bubble_summary",  # 平底锅表情的摘要
    # 位置共享
    "52152": "location_share_text",  # 位置共享消息的文本描述
    # bot/markdown 消息
    "48701": "markdown_text",  # markdown
}

# 45002
MSG_TYPE_MAP = {
    1: "T_Text",
    2: "T_Image",
    3: "T_File",
    4: "T_Ptt",
    5: "T_Video",
    6: "T_QQFace",
    7: "T_ReplyBlock",
    8: "T_GrayTip",
    9: "T_RedBag",
    10: "T_Ark",
    11: "T_MarketFace",
    14: "T_Markdown",
    17: "T_MarkdownButton",
    21: "T_LiveRecord",
    26: "T_GrayTip_QQZone",
    27: "T_BubbleFace",  # 平底锅x10 之类的
    28: "T_ShareLocation",
    44: "T_QQBotChat",
}

IGNORE_IDS = {
    # bot/markdown 消息
    "45005",
    "48702",
    "48703",  # 未知对象
    "48720",
    "48721",
    "48704",
    "48752",  # 未知
    # ---
    "45001",  # 消息序列号/ID (对于文本导出无意义，排序主要靠时间戳)
    "47710",  # 主人撤回消息的文本
    "47424",  # 撤回相关, 固定1
    # --- 文件/图片传输协议元数据 ---
    "45503",  # 文件下载 Token/资源标识符 (EhShiOim...)，url字段已包含此信息
    "45505",  # 文件上传/处理的时间戳
    "45511",  # 文件传输状态位/标志位 (通常为 1)
    "45513",  # 文件传输类型/版本 (通常为 1)
    "45517",  # 另一个与文件相关的时间戳 (通常与 45505 相同)
    "45008",  # 内部业务 ID 或子类型
    "45554",  # 文件传输提示
    "45807",  # 似乎固定80
    "45806",  # 未知
    # --- 未知/保留字段 ---
    "45102",  # 消息保留位 (样本中全为 0)
    "40010",  # 通用保留字段
    "47418",  # 引用相关的扩展保留位
    # --- 引用/回复块 (ReplyBlock) 相关 ---
    "40020",  # 原消息发送者 UID (若不需要显示"回复了谁"，可忽略)
    "40021",  # 原消息接收者/当前消息发送者 UID (冗余)
    "47402",  # 原消息的内部序列号 (Internal Index)
    "47416",  # 原消息的全局唯一标识 (Huge Int)
    "47419",  # 引用类型/长度元数据
    "47422",  # 引用内容的校验或摘要
    "47401",  # 原始消息 ID 的关联引用
    "47403",  # 原始消息相关的 QQ 号/群号整数形式
    "47411",  # 原始消息相关的 QQ 号/UID 映射
    # --- 商城表情 (MarketFace) 额外字段 ---
    "80810",  # 表情包 ID (Package ID)
    "80824",  # 表情字符 ID (Key/Hash)
    "80901",  # 表情类型 (如 6)
    "80902",  # 表情子类型 (如 1)
    "80903",  # 表情预览图/数据的 Base64 (已有 market_face_text 文本替代)
    "80905",  # 媒体类型标志
    "80908",  # 布局/渲染标志 (通常为 0)
    "80909",  # 预览图宽度 (Int 200)
    "80910",  # 预览图高度 (Int 200)
    "80935",  # 动画帧数或播放参数
    "80970",  # 包含宽高信息的列表结构 (冗余)
    "80913",  # 扩展元数据
    "80975",  # 兼容性标志
    "80980",  # 权限/付费标志
    "80981",  # 权限/付费标志
    "80983",  # 扩展 JSON 对象 (通常为空)
    "80995",  # 结束/填充标志
    # --- 文本消息额外控制字段 ---
    "45103",  # 文本编码/加密标志
    "45104",  # 字体/样式相关
    "45105",  # 气泡 ID
    "45106",  # 文本输入状态
    "45108",  # 翻译/转换标志
    "45109",  # 链接识别标志
    "45110",  # 艾特(@)相关的位掩码
    "45111",  # 红包/钱包含义标志
    "47705",
    "47706",  # 撤回者的昵称和备注
    "45112",  # 发送网址时的校验字段
    # --- QQ 业务逻辑字段 ---
    "49154",  # 漫游消息标志
    "49155",  # 多端同步标志
    # --- 系统提示/互动 ---
    "48274",  # 互动按钮 (XML/JSON 结构)
    # --- 戳一戳/拍一拍 结构化字段 ---
    "48210",  # 涉及的用户列表 (UIDs)
    "48216",  # 动作 ID (如 "拍了拍")
    "48217",  # 动作参数 (如后缀文字)
    "48215",  # 业务逻辑 ID
    "48218",  # 预留字段
    # --- 亲密度/关系链 ---
    "48271",  # 亲密度图标/链接 JSON (文本导出不需要图标)
    # --- 空间/Feed/富媒体冗余 ---
    "48183",  # 跳转链接 Schema (通常无法在纯文本中直接使用)
    "48181",  # 业务 Logo 图片 URL
    "48172",  # Feed 内部 ID 1
    "48173",  # Feed 内部 ID 2
    "48174",  # Feed 内部 ID 3
    "45004",  # 调试用 JSON 字符串
    "48179",  # 背景色/样式代码
    "48191",  # 互动按钮类型 ID
    "48192",  # 互动按钮子类型
    "48180",  # 动态图片内部 URL
    "48189",  # 动态按钮配置
    # --- 拍一拍冗余 ---
    "48211",  # 动作类型 ID
    "48212",  # 动作具体 ID
    "48213",  # 连击计数
    "48217-1",  # 解析器产生的变体 Key
    # --- 关系提示冗余 ---
    "48272",  # 关系链变化类型
    "48273",  # 关系链变化时间
    "48275",  # 关系链展示文案
    # --- 图片/大文件相关 ---
    "45600",  # 极大的嵌套冗余数据 (通常包含原图数据的重复引用)
    "45406",  # MD5 的 Base64 编码 (已有 Hex 版本的 image_md5_hex 或通过 file_name 获取)
    "45408",  # 图片内容的校验/特征值 (Base64 或 Dict)
    "45416",  # 图片类型标志 (1000=普通, 2000=表情包/动图, 1001=原图)
    "45518",  # 文件过期时间 TTL (常量 157680000 = 5年)
    "45424",  # MD5 Hex (若数据中已有 image_md5_hex 字段，此 ID 可作为冗余忽略)
    # --- 未知 Flags / 空对象 ---
    "45504",
    "45510",
    "45512",
    "45550",  # 传输过程中的控制位
    # --- 多媒体服务参数 (458xx) ---
    "45815",  # 占位符文本 (如 ["['动画表情']"])，应直接使用图片渲染而非此文本
    "45816",  # 多媒体服务器域名 (multimedia.nt.qq.com.cn)
    "45817",
    "45818",
    "45819",
    "45820",  # 预留/空字典
    "45821",
    "45822",
    "45823",
    "45824",  # 预留/0
    "45825",
    "45826",
    "45827",
    "45828",  # 预留/0
    "45830",  # 预留/0
    "45851",  # 视频相关
    "45852",
    "45853",
    "45865",
    # --- 频繁出现的无意义标记 ---
    "47415",  # 消息存在/结束标记
    "47702",  # 保留位 0
    "47711",  # 保留位 1
    "47704",  # 少量出现的 UID
    # --- 撤回冗余(直接使用UID) ---
    "47712",  # 固定 1
    "47714",  # 冗余的撤回消息人的名称
    "47715",  # 冗余的撤回消息人的备注
    # --- Ark/小程序 内部数据 ---
    "47902",  # Ark Base64 Data (不可读)
    "47904",  # Ark UUID
    # --- 语音(PTT) 渲染数据 ---
    "45925",  # 音频波形数据 (Base64)
    "45906",
    "45907",
    "45909",
    "45911",
    "45922",
    "45924",
    "45926",  # 语音格式参数
    "45403",  # 本地路径
    "45601",  # 未知对象
    "45903",
    "45912",
    # --- 文件传输元数据 ---
    "45421",  # 文件 Token/校验 Base64
    "45415",  # 文件相关标志
    "45423",
    "45515",
    "45516",
    "45519",  # 传输时间戳/过期时间
    "45862",
    "45863",  # 文件传输通道参数
    "45407",  # 未知
    "45409",  # 未知
    "45501",  # 未知
    "45514",  # 未知
    "45422",  # 视频预览封面文件名称
    "45954",  # 图片略缩图路径
    "45507",  # 图片相关, 未知
    "45509",  # 图片相关, 未知
    # --- 空对象/样式 ---
    "80907",
    "45801",  # 空 JSON {}
    "80941",
    "80942",
    "80977",
    "80978",  # 颜色代码/样式
    "45805",  # 0
    # --- QQ 表情冗余 ---
    "47601",  # qq emoji id
    "47603",
    "47604",  # qq 表情冗余字段, 大多是 0 或者空对象
    "47605",
    "47606",
    "47607",
    "47609",
    "47612",
    "47613",
    "47614",
    "47615",
    "47616",
    "47617",
    "47618",
    "47619",
    "47620",
    "47621",
    "47608",
    "47622",
    # ---- 平底锅表情冗余 ----
    "52132",
    "52133",
    "52134",
    "52139",
    "52137",
    # ---- 红包冗余 ----
    "48448",  # 红包标题摘要
    "48461",  # 未知对象
    "48417",
    "48446",  # 未知字段
    "48447",
    "48449",
    "48450",
    "48451",
    "48452",
    "48453",
    "48404",
    "48405",
    "48406",
    "48407",
    "48408",
    "48409",
    "48410",
    "48411",
    "48418",
    "48419",
    "48421",
    "48401",
    "48402",
    "48441",
    "48442",
    "48454",  # 红包内部 ID
    "48444",  # 固定的文本描述
    "48445",  # 固定的文本描述
    "48421",  # 皮肤对象
    # ---- 通话冗余(直接使用48157摘要) ----
    "48153",  # 音视频通话状态文本 (如 "通话时长 00:10")
    "48154",  # 通话类型 (1:语音, 2:视频)
    "48151",
    "48152",
    "48155",  # 0
    "48156",  # 0
    # --- 位置共享 ---
    "48220",  # 0
    # --- bot 相关
    "48751",  # bot 按钮
    
    "45526",
}
