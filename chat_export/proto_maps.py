PROTO_FIELD_MAP = {
    "40800": "MSG_CONTAINER",  # 消息容器, 可能是 protobuf array, 包含引用块等附属对象
    "45002": "MSG_TYPE",  # 消息类型
    "45003": "MSG_SUB_TYPE",  # 子类型, 可能用于区分互动表情等
    # --- T_ReplyBlock ---
    "47404": "reply_origin_timespan",  # 依据此时间戳查找引用的目标
    "47413": "reply_origin_summary",  # 原消息的文本摘要
    "47423": "ReplyOrigin",  # 原消息的完整对象, 可能是原消息被拆分多段的 array
    # --- T_Text ---
    "45101": "text",  # 消息文本
    # --- T_Ark ---
    "47901": "ark_json",  # Ark 卡片的 json 数据
    # --- T_File, T_Ptt, T_Image, T_Video
    "45405": "file_size",  # 文件大小
    "45402": "file_name",  # 文件名称
    "45923": "voice_to_text",  # 语音转文字的结果, 可能为空
    "45411": "image_width",  # 图像宽度
    "45412": "image_height",  # 图像宽度
    "45829": "image_is_flash",  # 图片是否为闪照的标志字段 (1:是闪照)
    "45418": "is_original",  # 0:普通图, 1:原图
    "45410": "video_duration",  # 视频时长
    "45413": "video_width",  # 视频宽度
    "45414": "video_height",  # 视频高度
    "45424": "image_md5_hex",  # 32位 MD5 字符串，用于计算本地路径
    "45802": "url_198",  # 缩略图下载链接
    "45803": "url_720",  # 预览图下载链接
    "45804": "url_original",  # 原图下载链接
    # --- T_GrayTip_QQZone ---
    "48175": "FeedSourceStruct",  # 包含 text: "发布了动态" 或 "更新了个签" 等
    "48176": "FeedContentStruct",  # 动态内容的文本摘要
    "48182": "feed_target_uin",  # 动态所属的用户的 QQ
    "48178": "feed_text",  # FeedSourceStruct 或者 FeedContentStruct 的子字段
    # --- T_GrayTip ---
    "48214": "system_gray_tip_xml",  # 系统提示的 xml 内容, 包含火花提示, 好友验证, 戳头像等
    "48271": "mutual_mark_json",  # 火花提示的 json
    "48274": "gray_tip_content",  # 火花提示的纯文本摘要
    "47703": "recaller_uid",  # 撤回者的 UID
    "47713": "recall_suffix",  # 撤回消息的后缀文本 (例如 "你猜猜撤回了什么。")
    # --- T_RedBag ---
    "48403": "RedBagOBJ",  # 红包详情对象
    "48412": "REDBAG_TYPE",  # 红包类型字段 (2:普通, 6:口令, 15:语音红包)
    "48443": "redbag_text",  # 红包标题, 如 "恭喜发财"
    # --- T_LiveRecord ---
    "48157": "call_summary",  # 通话消息的文本摘要
    # --- T_MarketFace ---
    "80900": "market_face_text",  # 商城表情的描述文本, 例如 "[贴贴]"
    # --- T_QQFace ---
    "47602": "qqface_emoji_text",  # QQ emoji 的文本描述, 例如 "/捂脸"
    "47611": "qqface_reaction_id",  # QQ 互动表情的 ID, 例如对应 "放大招", "戳一戳"等
    "52138": "qqface_bubble_summary",  # 平底锅表情的摘要, 例如"[平底锅]x10"
    # --- T_ShareLocation ---
    "52152": "location_share_text",  # 位置共享消息的文本描述
    # --- T_Markdown, T_QQBotChat, T_MarkdownButton ---
    "48701": "markdown_text",  # 常见于 qq bot
}

# 45002
MSG_TYPE_MAP = {
    1: "T_Text",
    2: "T_Image",
    3: "T_File",
    4: "T_Ptt",
    5: "T_Video",
    6: "T_QQFace",
    7: "T_ReplyBlock",
    8: "T_GrayTip",
    9: "T_RedBag",
    10: "T_Ark",
    11: "T_MarketFace",
    14: "T_Markdown",  # 常见于 qq bot
    17: "T_MarkdownButton",  # qq bot 的按钮
    21: "T_LiveRecord",  # 视频语音通话
    26: "T_GrayTip_QQZone",
    27: "T_BubbleFace",  # 平底锅x10 之类的
    28: "T_ShareLocation",
    44: "T_QQBotChat",
}

# 对人类可读性来说无意义的冗余字段
IGNORE_IDS = {
    # --- 40xxx: 通用 ID / 基础引用 ---
    "40010",  # 通用保留字段
    "40020",  # 原消息发送者 UID (ReplyBlock 冗余)
    "40021",  # 原消息接收者 UID (ReplyBlock 冗余)
    # ---  450xx: 消息元数据 / 调试 / 类型 ---
    "45001",  # 消息序列号/ID (文本导出主要依赖时间戳排序)
    "45004",  # 调试用 JSON 字符串 (Feed/QZone)
    "45005",  # Bot/Markdown 相关元数据
    "45008",  # 内部业务 ID 或子类型 (File/Trans)
    #  --- 451xx: 文本控制 / 格式化 / 状态 ---
    "45102",  # 消息保留位 (通常为 0)
    "45103",  # 文本编码/加密标志
    "45104",  # 字体/样式相关
    "45105",  # 气泡 ID
    "45106",  # 文本输入状态
    "45108",  # 翻译/转换标志
    "45109",  # 链接识别标志
    "45110",  # @相关位掩码
    "45111",  # 红包/钱包含义标志
    "45112",  # 网址校验字段
    #  --- 454xx: 文件 / 图片 / 视频基础属性 ---
    "45403",  # 本地路径 (PTT/File)
    "45406",  # MD5 Base64 (已有 Hex 版本)
    "45407",  # 文件传输相关
    "45408",  # 图片内容校验/特征值
    "45409",  # 文件传输相关
    "45415",  # 文件相关标志
    "45416",  # 图片类型标志 (1000:普通, 2000:表情, 1001:原图)
    "45421",  # 文件 Token/校验 Base64
    "45422",  # 视频预览封面文件名
    "45423",  # 文件传输相关
    #  --- 455xx: 文件传输协议 / 状态 / Token ---
    "45501",  # 传输相关
    "45503",  # 文件下载 Token/资源标识符
    "45504",  # 传输 Flags
    "45505",  # 上传/处理时间戳
    "45507",  # 图片传输相关
    "45509",  # 图片传输相关
    "45510",  # 传输 Flags
    "45511",  # 传输状态位 (通常为 1)
    "45512",  # 传输 Flags
    "45513",  # 传输类型/版本
    "45514",  # 传输相关
    "45515",  # 传输相关
    "45516",  # 传输相关
    "45517",  # 时间戳 (通常与 45505 相同)
    "45518",  # 文件过期时间 TTL
    "45519",  # 传输时间戳/过期时间
    "45526",  # Bot 相关/文件传输
    "45550",  # 传输控制位
    "45554",  # 文件传输提示
    # ---  456xx: 嵌套结构 / 复杂媒体 ---
    "45600",  # 极大的嵌套冗余数据
    "45601",  # PTT/Audio 相关对象
    #  --- 458xx: 多媒体服务 / 样式 / 占位符 ---
    "45801",  # 空对象
    "45805",  # 预留/0
    "45806",  # 文件元数据
    "45807",  # 似乎固定 80
    "45815",  # 占位符文本 (如 "['动画表情']")
    "45816",  # 多媒体服务器域名
    "45817",
    "45818",
    "45819",
    "45820",  # 预留/空字典
    "45821",
    "45822",
    "45823",
    "45824",  # 预留/0
    "45825",
    "45826",
    "45827",
    "45828",  # 预留/0
    "45830",  # 预留/0
    "45851",  # 视频参数
    "45852",  # 视频参数
    "45853",  # 视频参数
    "45862",  # 文件通道参数
    "45863",  # 文件通道参数
    "45865",  # 视频参数
    #  --- 459xx: 语音 (PTT) / 音频波形 ---
    "45903",  # 语音相关
    "45906",
    "45907",
    "45909",
    "45911",
    "45912",  # 语音相关
    "45922",
    "45924",
    "45925",  # 音频波形数据 (Base64)
    "45926",  # 语音格式参数
    "45954",
    #  --- 474xx: 引用 / 回复块 (ReplyBlock) ---
    "47401",  # 原始消息 ID 关联
    "47402",  # 原消息内部序列号
    "47403",  # 原消息相关 QQ/群号 (Int)
    "47411",  # 原消息相关 UID 映射
    "47415",  # 消息存在/结束标记
    "47416",  # 原消息全局唯一标识 (Huge Int)
    "47418",  # 引用扩展保留位
    "47419",  # 引用类型/长度元数据
    "47422",  # 引用内容校验/摘要
    "47424",  # 撤回相关 (固定 1)
    #  --- 476xx: QQ 表情 (Face/Emoji) 冗余 ---
    "47601",  # Emoji ID
    "47603",
    "47604",  # (0 或空)
    "47605",
    "47606",
    "47607",
    "47608",
    "47609",
    "47612",
    "47613",
    "47614",
    "47615",
    "47616",
    "47617",
    "47618",
    "47619",
    "47620",
    "47621",
    "47622",
    # ---  477xx: 撤回 (Recall) / 成员操作 ---
    "47702",  # 保留位 0
    "47704",  # 少量出现的 UID
    "47705",  # 撤回相关
    "47706",  # 撤回者昵称/备注
    "47710",  # 主人撤回消息文本
    "47711",  # 保留位 1
    "47712",  # 撤回冗余 (固定 1)
    "47714",  # 撤回者名称 (冗余)
    "47715",  # 撤回者备注 (冗余)
    #  --- 479xx: Ark / 小程序数据 ---
    "47902",  # Ark Base64 Data
    "47904",  # Ark UUID
    #  --- 481xx: 通话 / 动态 (Feed) ---
    "48151",  # 通话相关
    "48152",  # 通话相关
    "48153",  # 通话状态文本, 已由 summary 覆盖
    "48154",  # 通话类型 (1:语音, 2:视频)
    "48155",  # 通话相关 (0)
    "48156",  # 通话相关 (0)
    "48172",  # Feed 内部 ID 1
    "48173",  # Feed 内部 ID 2
    "48174",  # Feed 内部 ID 3
    "48179",  # 背景色/样式代码
    "48180",  # 动态图片内部 URL
    "48181",  # 业务 Logo URL
    "48183",  # 跳转 Schema
    "48189",  # 动态按钮配置
    "48191",  # 互动按钮类型 ID
    "48192",  # 互动按钮子类型
    #  --- 482xx: 系统提示 / 戳一拍 / 关系链 ---
    "48210",  # 涉及用户列表 (UIDs)
    "48211",  # 动作类型 ID
    "48212",  # 动作具体 ID
    "48213",  # 连击计数
    "48215",  # 业务逻辑 ID
    "48216",  # 动作 ID (如 "拍了拍")
    "48217",  # 动作参数 (后缀文字)
    "48217-1",  # 解析器产生的变体 Key
    "48218",  # 预留字段
    "48220",  # 位置共享相关 (0)
    "48271",  # 亲密度/火花 JSON
    "48272",  # 关系链变化类型
    "48273",  # 关系链变化时间
    "48274",  # 互动按钮 XML/JSON
    "48275",  # 关系链展示文案
    #  --- 484xx: 红包 (RedBag) 详情与冗余 ---
    "48401",
    "48402",
    "48404",
    "48405",
    "48406",
    "48407",
    "48408",
    "48409",
    "48410",
    "48411",
    "48417",
    "48418",
    "48419",
    "48421",  # 皮肤对象 / 冗余字段
    "48441",
    "48442",
    "48444",  # 固定文本描述
    "48445",  # 固定文本描述
    "48446",  # 未知字段
    "48447",
    "48448",  # 标题摘要
    "48449",
    "48450",
    "48451",
    "48452",
    "48453",
    "48454",  # 红包内部 ID
    "48461",  # 未知对象
    #  --- 487xx: Bot / Markdown 扩展 ---
    "48702",
    "48703",  # 未知对象
    "48704",
    "48720",
    "48721",
    "48751",  # Bot 按钮
    "48752",  # 未知
    #  --- 491xx: 业务逻辑 / 同步 ---
    "49154",  # 漫游消息标志
    "49155",  # 多端同步标志
    #  --- 521xx: 平底锅表情 ---
    "52132",
    "52133",
    "52134",
    "52137",
    "52139",
    #  --- 80xxx: MarketFace 详情 ---
    "80810",  # 表情包 ID
    "80824",  # 表情字符 ID (Key)
    "80901",  # 表情类型
    "80902",  # 表情子类型
    "80903",  # 预览图 Base64 (已有文本替代)
    "80905",  # 媒体类型标志
    "80907",  # 空对象
    "80908",  # 渲染标志
    "80909",  # 预览图宽度
    "80910",  # 预览图高度
    "80913",  # 扩展元数据
    "80935",  # 动画参数
    "80941",  # 样式/空对象
    "80942",  # 样式/空对象
    "80970",  # 宽高列表
    "80975",  # 兼容性标志
    "80977",  # 样式/空对象
    "80978",  # 颜色/样式代码
    "80980",  # 权限标志
    "80981",  # 权限标志
    "80983",  # 扩展 JSON
    "80995",  # 结束/填充标志
}
